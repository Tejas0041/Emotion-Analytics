<% layout('layout/../boilerplate.ejs') %>

<div style="min-height: 88.8vh;" class="mt-3">
  <% if(!(users.length===0)){ %>
    <% for(let u of users){ %>
        <center>
            <div class="card mb-3" style="max-width: 540px;  background: linear-gradient(to right, white, grey);">
                <div class="row g-0">
                  <div class="col-md-4">
                    <img src="<%= u.image[0].thumbnail %>" class="img-fluid rounded-start" alt="">
                  </div>
                  <div class="col-md-8">
                    <div class="card-body">
                      <h5 class="card-title"><%= u.fullname %></h5>
                      <p class="card-text" style="text-align: left;"><b>Enrollment: </b><%= u.username %></p>
                      <p class="card-text" style="text-align:left;"><b>Semester: </b><%= u.semester %></p>
                      <p class="card-text" style="text-align: left;"><b>Gsuite Id: </b><%= u.gsuite %></p>
                    </div>
                  </div>
                  <div class="row g-0" style="padding: 10px 15px;">
                    <form action="/approve-registration/<%= u._id %>" method="post" class="row g-0 mb-3">
                      <button class="btn btn-success" type="submit">Verify</button>
                    </form>

                    <!-- <form action="/decline-registration/<%= u._id %>" method="post" class="row g-0"> -->
                    <button class="btn btn-danger" type="submit" data-bs-toggle="collapse" data-bs-target="#collapseExample" aria-expanded="false" aria-controls="collapseExample">
                      Decline Registration
                    </button>
                    <!-- </form> -->
                    <br>

                    <div class="collapse mt-2" id="collapseExample" style="border: 1px solid black; border-radius: 7px;">
                      <div class="card card-body" style="background: linear-gradient(to bottom, rgb(177, 177, 177), rgb(203, 202, 202));">
                        <form action="/decline-registration/<%= u._id %>" class="validated-form" method="post" novalidate>
                          <label for="decline-message" class="mb-2" style="font-size: large;"><b>Reason for declining Registration</b></label>
                          <br>
                          <input type="text" name="remark" id="decline-message" style="border: 1px solid black; border-radius: 5px;" class="form-control mb-2" autofocus required>
                          <div class="invalid-feedback">
                            <b>
                              Please enter a Reason for declining the Registration
                            </b>
                          </div>
                          <br>
                          <button class="btn btn-outline-danger">Decline</button>
                        </form>
                      </div>
                    </div>
                  </div>
                </div>
            </div>
        </center>
      <% } %>
    <% } else {%>
        <div  style="display: flex; align-items: center; justify-content: center; min-height: 88.8vh;">
            <h2><b>No Approval requests at the moment</b></h2>
        </div>
    <% } %>
</div>